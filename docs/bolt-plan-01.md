# Bolt Plan 01: 初期環境構築とボイスクローン検証

最初の開発サイクル（2〜4時間想定）のタスク分解です。

## Bolt ゴール

**Qwen3-TTS 環境を構築し、ボイスクローン動作を検証する。**

## タスク一覧

### 優先度: 高

| # | タスク | 完了条件 | 所要時間（目安） |
|---|--------|----------|------------------|
| 1 | WSL2/Ubuntu 上で Python 3.12 仮想環境を構築する | `python --version` で 3.12 が表示され、`.venv` が有効 | 15分 |
| 2 | PyTorch（CUDA 12.1）+ qwen-tts をインストールする | `import qwen_tts` がエラーなく実行できる | 30分 |
| 3 | FlashAttention 2 をインストールする（オプション） | `attn_implementation="flash_attention_2"` でモデルがロードできる | 15〜30分 |
| 4 | Qwen3-TTS Base モデルでサンプル音声を生成する | 公式サンプル（ref_audio + ref_text）で WAV が出力される | 30分 |
| 5 | 自分の音声サンプル（data/）でボイスクローンを試す | data/ に配置した音声からクローン音声が生成される | 30分 |

### 優先度: 中

| # | タスク | 完了条件 | 所要時間（目安） |
|---|--------|----------|------------------|
| 6 | ボイスクローン用の TTS モジュールを src/ に作成する | テキスト入力→WAV 出力の関数が呼び出せる | 45分 |
| 7 | 生成音声の品質を主観評価する | 友人・自分が「本人の声」と認識できるか確認 | 15分 |

### 優先度: 低（次 Bolt で実施可）

| # | タスク | 完了条件 |
|---|--------|----------|
| 8 | Discord bot の骨格を作成する | `python -m src.bot` でボットが起動する |
| 9 | スラッシュコマンドを実装する | `/join` で VC に参加できる |

## 詰まりそうなポイント

1. **VRAM 不足**: 12GB で 1.7B モデルはギリギリ。FlashAttention 2 必須の可能性あり。ダメなら 0.6B にフォールバック。
2. **音声サンプルの品質**: NowSmart Audio Recorder で録音した音声のノイズ・無音区間。必要に応じてトリミング・ノイズ除去を検討。
3. **参照テキスト（ref_text）**: 録音内容と完全一致している必要あり。手動入力または faster-whisper で文字起こし。

## Mob 検証のタイミング

1. **タスク 4 完了時**: 公式サンプルでボイスクローンが動作するか確認
2. **タスク 5 完了時**: 自分の声でクローンが成功したか主観評価
3. **タスク 7 完了時**: 品質が「本人の声」レベルに達しているか判断

## 次の Bolt への引き継ぎ事項

- ボイスクローン品質が満足できる場合 → Discord bot 統合（Bolt Plan 02）
- VRAM 不足の場合 → 0.6B モデルへの移行検討
- 音声品質が不足の場合 → 録音条件の見直し、サンプル時間の延長

## 実行ログ

実行時は `logs/development-log.md` に記録する。
